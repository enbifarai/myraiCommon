@model myRaiCommonModel.PromemoriaModel


@{
    string datapro = "";
    if (Model.Richiesta.XR_MAT_PROMEMORIA.Any())
    {
        var p = Model.Richiesta.XR_MAT_PROMEMORIA.FirstOrDefault();
        datapro = p.DATA.ToString("dd/MM/yyyy");
    }
}
@if (Model.InCaricoAMe)
{
    @*<section class="rai panel" id="sect-promemoria">*@
        @*<div class="row">
                <div class="col-sm-12" style="padding-top:22px">
                    <span class="rai-font-md-bold">PROMEMORIA</span>
                </div>

            </div>
            <div class="row">
                <div class="col-sm-12">
                    <div style="background-color: #eee;height: 1px;margin-top: 11px;"></div>
                </div>
            </div>*@

        <div class="block block-content-table block-transparent remove-margin-bottom"  id="sect-promemoria">
            <div class="block-header" href="#collapse-promemoria" data-toggle="collapse" aria-expanded="false" data-block-toggle>
                <label class="block-title">PROMEMORIA</label>
                <div class="block-options">
                    <i data-toggle="collapse" class="fa fa-chevron-down"></i>
                </div>
            </div>
            <div class="block-content collapse" id="collapse-promemoria">
                <div class="row">
                    <div class="col-sm-12">
                        <div class="panel">
                            <div class="panel-body">
                                <div class="row">
                                    <div class="col-sm-12">
                                        <span class="rai-font-sm">
                                            Impostando un promemoria, la richiesta verrà visualizzata come prioritaria nel tuo elenco richieste.
                                        </span>
                                    </div>
                                </div>
                                <div class="row" style="margin-top:12px">
                                    <div class="col-sm-12">
                                        <span style="font-size:88%" class="rai-font-md-bold">DATA PROMEMORIA</span>
                                    </div>
                                </div>


                                <div class="row" style="margin-top:12px">
                                    <div class="col-sm-12">
                                        <div class="input-group mb-md">
                                            <span class="input-group-addon"><i class="icons icon-calendar"></i></span>

                                            <input onchange="AbilitaSalva()" class="js-datetimepicker form-control" data-format="DD/MM/YYYY" data-locale="it" type="text" id="dataprom" placeholder="Data promemoria" value="@datapro">
                                        </div>
                                    </div>
                                </div>


                                <div class="row" style="margin-top:12px">
                                    <div class="col-sm-12">
                                        <a id="salvaprom" class="btn rai-btn-small full-width @(datapro==""?"disable":"")" onclick="SalvaPromemoria(@Model.Richiesta.ID, $('#dataprom').val())">Salva</a>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

    @*</section>*@
}

<script>
    InitDatePicker();
    function AbilitaSalva() {
        var data = $("#dataprom").val();
        if (data.trim() == "")
            $("#salvaprom").addClass("disable");
        else
            $("#salvaprom").removeClass("disable");
    }
</script>