@using myRaiCommonModel
@model AnagraficaResDom

@{
    var listAction = new List<myRaiHelper.ActionTemplate>();
    var listDomAction = new List<myRaiHelper.ActionTemplate>();
    if (Model.Residenza.CanModify)
    {
        listAction.Add(new myRaiHelper.ActionTemplate() { Icon = "fa fa-pencil", OnClick = "OpenModalIndirizzo('" + Model.Residenza.Matricola + "','residenza', false)", Title = "Modifica dati residenza" });
    }
    if (Model.Domicilio.CanModify)
    {

        listDomAction.Add(new myRaiHelper.ActionTemplate() { Icon = "fa fa-pencil", OnClick = "OpenModalIndirizzo('" + Model.Domicilio.Matricola + "','domicilio', false);" });
    }

    //if (Model.Domicilio.CanDelete)
    //{
    //    listDomAction.Add(new myRaiHelper.ActionTemplate() { Icon = "fa fa-trash-o" });
    //}
}

@using (Html.BeginBlock(myRaiHelper.BlockType.ContentTable, "Residenza", listAction))
{
    if (!Model.Residenza.IsNew)
    {
        <div class="rai-table-info">
            <div class="row push-10-t">
                <div class="col-sm-4 col-md-3 col-xl-2">
                    <span>Decorrenza</span>
                </div>
                <div class="col-sm-8">
                    <span>@Model.Residenza.Decorrenza.ToString("dd/MM/yyyy")</span>
                </div>
            </div>
            <div class="row push-10-t">
                <div class="col-sm-4 col-md-3 col-xl-2">
                    <span>Indirizzo</span>
                </div>
                <div class="col-sm-8">
                    <span>@Model.Residenza.Indirizzo</span>
                </div>
            </div>
            <div class="row push-10-t">
                <div class="col-sm-4 col-md-3 col-xl-2">
                    <span>Città</span>
                </div>
                <div class="col-sm-8">
                    <span>@Model.Residenza.Citta</span>
                </div>
            </div>
            <div class="row push-10-t">
                <div class="col-sm-4 col-md-3 col-xl-2">
                    <span>CAP</span>
                </div>
                <div class="col-sm-8">
                    <span>@Model.Residenza.CAP</span>
                </div>
            </div>
            <div class="row push-10-t">
                <div class="col-sm-4 col-md-3 col-xl-2">
                    <span>Stato</span>
                </div>
                <div class="col-sm-8">
                    <span>@Model.Residenza.Stato</span>
                </div>
            </div>
        </div>
    }
    if (Model.Residenza.CanAdd)
    {
        <div class="row push-10-t">
            <div class="col-sm-12">
                <button class="btn rai-btn-small full-width" onclick="OpenModalIndirizzo('@Model.Residenza.Matricola','residenza', true)">Aggiungi residenza</button>
            </div>
        </div>
    }
}

@using (Html.BeginBlock(myRaiHelper.BlockType.ContentTable, "Domicilio", listDomAction))
{
    if (!Model.Domicilio.IsNew)
    {
        <div class="rai-table-info">
            <div class="row push-10-t">
                <div class="col-sm-4 col-md-3 col-xl-2">
                    <span>Indirizzo</span>
                </div>
                <div class="col-sm-8">
                    <span>@Model.Domicilio.Indirizzo</span>
                </div>
            </div>
            <div class="row push-10-t">
                <div class="col-sm-4 col-md-3 col-xl-2">
                    <span>Città</span>
                </div>
                <div class="col-sm-8">
                    <span>@Model.Domicilio.Citta</span>
                </div>
            </div>
            <div class="row push-10-t">
                <div class="col-sm-4 col-md-3 col-xl-2">
                    <span>CAP</span>
                </div>
                <div class="col-sm-8">
                    <span>@Model.Domicilio.CAP</span>
                </div>
            </div>
            <div class="row push-10-t">
                <div class="col-sm-4 col-md-3 col-xl-2">
                    <span>Stato</span>
                </div>
                <div class="col-sm-8">
                    <span>@Model.Domicilio.Stato</span>
                </div>
            </div>
        </div>
    }
    if (Model.Domicilio.IsNew && Model.Domicilio.CanAdd)
    {
        <div class="row push-10-t">
            <div class="col-sm-12">
                <button class="btn rai-btn-small full-width" onclick="OpenModalIndirizzo('@Model.Domicilio.Matricola','domicilio', true)">Aggiungi domicilio</button>
            </div>
        </div>
    }
}