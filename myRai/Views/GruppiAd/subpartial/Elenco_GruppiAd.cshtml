@using myRai.Models
@model List<GruppoAd>


<table class="rai table rai-table rai-table-vcenter js-table-sections rai-table-panel" id="acc-slot">

    @foreach (var item in Model)
    {
        <tbody class="js-table-sections-header">
            <tr>
                <td style="width:70%">
                    <span class="rai-font-md-bold">@item.Nome</span>
                </td>
                <td class="text-right" style="width:30%">
                    <span class="rai-font-sm-neutral">@item.Persone.Count() @(item.Persone.Count() == 1 ? "dipendente" : "dipendenti")</span>
                </td>
                <td>
                    <button class="btn rai-btn-small" onclick="OpenDettaglio('@item.Nome')">Modifica</button>
                </td>
                <td class="rai-table-td-toggle">
                    <i class="fa fa-chevron-down"></i>
                </td>
            </tr>
        </tbody>
        <tbody>
            <tr>
                <td colspan="4" class="no-padding">
                    <table class="rai table rai-table rai-table-vcenter rai-table-panel table-striped">
                        @foreach (var pers in item.Persone.OrderBy(x=>x.Matricola))
                        {
                            <tr data-search="elenco-dip" data-search-matr="@pers.Matricola'" data-search-name="@pers.Nominativo" aria-hidden="false">
                                <td><span class="rai-font-md-neutral-bold">@pers.Matricola</span></td>
                                <td style="width:100%"><span class="rai-font-md">@pers.Nominativo</span></td>
                            </tr>
                        }
                    </table>
                </td>
            </tr>
        </tbody>
    }

</table>