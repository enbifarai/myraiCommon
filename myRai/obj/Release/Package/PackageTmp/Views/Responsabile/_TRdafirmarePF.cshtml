@using System.Globalization;
@using myRaiHelper;
@using myRaiCommonModel;
@using MVCProject.Custom_Helpers;

@model myRaiData.MyRai_PianoFerieSedi

<tr class="trdata visible-lg bgrow" data-idpdf="@Model.id" data-ispf="true" data-sede="@Model.sedegapp" data-descsede="@Model.desc_sede" data-descrep="@Model.desc_reparto">
    <td class="text-center"></td>
    <td class="font-w600 font90" colspan="2">

        PIANO FERIE ANNO @Model.anno
        @if ( !String.IsNullOrWhiteSpace( Model.desc_reparto ) )
        {
            <br /><em>@Model.desc_reparto</em>
        }
    </td>

    <td class="font-w600">
        Versione @Model.numero_versione</em>
    </td>
    <td class="font-w600">
        @if ( Model.data_firma != null )
        {
            <small> Firmato <br /></small>
            @( ( ( DateTime ) Model.data_firma ).ToString( "dd/MM/yyyy ore HH.mm" ))
        }

        else if ( Model.data_approvata != null )
        {
            <small> Generato <br /></small>
            @( ( ( DateTime ) Model.data_approvata ).ToString( "dd/MM/yyyy ore HH.mm" ))
        }


    </td>
    <td class="font-w600 visible-xs" colspan="4">
        PIANO FERIE ANNO @Model.anno
        @if (!String.IsNullOrWhiteSpace(Model.desc_reparto))
        {
            <br /><em>@Model.desc_reparto</em>
        }

        <br/>Versione @Model.numero_versione

        @if (Model.data_firma != null)
        {
            <br/> <small> Firmato <br /></small>
            @( ((DateTime)Model.data_firma).ToString("dd/MM/yyyy ore HH.mm"))
        }

        else if (Model.data_approvata != null)
        {
                  <br /><small> Generato <br /></small>
            @( ((DateTime)Model.data_approvata).ToString("dd/MM/yyyy ore HH.mm"))
        }
    </td>
    <td class="text-right" style="width: 100px;">

        @if ( Model.data_firma == null )
        {
            <button onclick="ShowPdfFromFirmaPF(@Model.id)"
                    class="btn btn-default btn-scriv text-uppercase bg-puls_dash button-viewpdf">
                VISUALIZZA
            </button>
        }
        else
        {
            <a style="padding:8px" href="/firma/getpdfbinaryPF?idpdf=@Model.id" target="_blank"
               class="btn btn-default btn-scriv text-uppercase bg-puls_dash button-viewpdf">
                VEDI PDF
            </a>
        }

    </td>
</tr>
