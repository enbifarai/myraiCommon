@using System.Globalization;
@using myRaiHelper;
@using myRaiHelper;
@using myRaiCommonModel;
@using myRaiCommonModel.raiplace;
@using MVCProject.Custom_Helpers;
@using myRaiCommonManager;

@model MyAbbonamenti
@{
    ViewBag.Title = "Abbonamenti";
    Layout = "~/Views/Shared/_layoutContent.cshtml";
    var oggi = DateTime.Today.ToString("dd/MM/yyyy");
}


<section role="main" class="content-body">

    <main id="main-container">
        <div class="content @(DateTime.Now.Day==3 && Model.CittaAbbonamento=="ROMA"?"bg-white text-center pulldown overflow-hidden":"")">

            @if (Model.CittaAbbonamento == "ROMA" || Model.CittaAbbonamento == "TORINO")
            {
                if (DateTime.Now.Day == 3 && Model.CittaAbbonamento == "ROMA")
                {
                    @*<div style="text-align: center; margin: auto;">
                            <i class="icons icon-lock col-fe" style="font-size: 80px;"></i>
                            <h5>Non è possibile effettuare richieste di abbonamneto nella giornata di oggi.<br />Da domani sarà di nuovo possibile effettuarne.</h5>
                        </div>*@

                    <div class="row">
                        <div class="col-sm-6 col-sm-offset-3" style="word-break: break-word;">
                            <svg xmlns="http://www.w3.org/2000/svg" width="257" height="191" style="margin: 70px;" class="font-s128 font-w300 push-50 text-danger animated bounceInDown h1">
                                <path fill="#14A3EE" fill-rule="evenodd" d="M214.983 83.857c-23.168 0-42.017-18.809-42.017-41.929C172.966 18.809 191.815 0 214.983 0 238.151 0 257 18.809 257 41.928c0 23.12-18.849 41.929-42.017 41.929zm0-79.165c-20.575 0-37.314 16.704-37.314 37.236 0 20.532 16.739 37.237 37.314 37.237s37.315-16.705 37.315-37.237c0-20.532-16.74-37.236-37.315-37.236zm26.149 47.344a2.347 2.347 0 0 1-2.192 1.498 2.35 2.35 0 0 1-1.662-.688l-33.236-33.165a2.343 2.343 0 0 1 .813-3.847 27.979 27.979 0 0 1 10.128-1.908c15.473 0 28.062 12.562 28.062 28.002 0 3.441-.644 6.841-1.913 10.108zm-26.149-33.418c-1.627 0-3.245.173-4.839.516l27.682 27.624c.343-1.592.516-3.206.516-4.83 0-12.853-10.478-23.31-23.359-23.31zm11.579 47.701a2.345 2.345 0 0 1-1.45 1.703 27.968 27.968 0 0 1-10.129 1.909c-15.473 0-28.061-12.562-28.061-28.003 0-3.44.643-6.84 1.912-10.107a2.35 2.35 0 0 1 3.855-.811l33.235 33.166c.562.56.802 1.367.638 2.143zm-34.421-29.22a22.83 22.83 0 0 0-.517 4.829c0 12.854 10.479 23.311 23.359 23.311 1.627 0 3.245-.173 4.839-.516l-27.681-27.624zm-90.615 102.213c2.907-2.09 6.202-4.458 12.546-4.458 6.348 0 9.645 2.368 12.554 4.457 2.669 1.917 4.975 3.573 9.807 3.573 4.832 0 7.137-1.656 9.807-3.573 2.908-2.089 6.205-4.457 12.553-4.457a2.349 2.349 0 0 1 2.351 2.347 2.349 2.349 0 0 1-2.351 2.346c-4.832 0-7.137 1.656-9.806 3.573-2.909 2.089-6.206 4.457-12.554 4.457-6.349 0-9.645-2.368-12.554-4.457-2.67-1.917-4.975-3.573-9.807-3.573-4.828 0-7.131 1.655-9.798 3.572-2.907 2.09-6.202 4.458-12.547 4.458-6.346 0-9.642-2.368-12.55-4.457-2.668-1.917-4.973-3.573-9.803-3.573a2.35 2.35 0 0 1-2.351-2.346 2.35 2.35 0 0 1 2.351-2.347c6.347 0 9.643 2.368 12.551 4.457 2.668 1.918 4.972 3.573 9.802 3.573 4.828 0 7.131-1.655 9.799-3.572zm-12.081-24.43a2.348 2.348 0 0 1-1.662.688c-.602 0-1.204-.23-1.663-.688l-7.541-7.525-7.542 7.525a2.348 2.348 0 0 1-1.663.688 2.348 2.348 0 0 1-1.662-4.006l7.542-7.525-7.542-7.526a2.343 2.343 0 0 1 0-3.318 2.355 2.355 0 0 1 3.325 0l7.542 7.526 7.541-7.526a2.355 2.355 0 0 1 3.325 0 2.343 2.343 0 0 1 0 3.318l-7.541 7.526 7.541 7.525a2.343 2.343 0 0 1 0 3.318zm71.011 0a2.348 2.348 0 0 1-1.663.688c-.601 0-1.203-.23-1.662-.688l-7.542-7.525-7.541 7.525a2.348 2.348 0 0 1-1.662.688 2.348 2.348 0 0 1-1.663-4.005l7.542-7.526-7.542-7.526a2.343 2.343 0 0 1 0-3.318 2.355 2.355 0 0 1 3.325 0l7.541 7.526 7.542-7.526a2.355 2.355 0 0 1 3.325 0 2.343 2.343 0 0 1 0 3.318l-7.542 7.526 7.542 7.526a2.342 2.342 0 0 1 0 3.317zM15.504 43.867a4.198 4.198 0 0 1 4.202-4.194 4.199 4.199 0 0 1 4.202 4.194 4.198 4.198 0 0 1-4.202 4.193 4.198 4.198 0 0 1-4.202-4.193zm12.837 0a4.198 4.198 0 0 1 4.202-4.194 4.198 4.198 0 0 1 4.202 4.194 4.198 4.198 0 0 1-4.202 4.193 4.198 4.198 0 0 1-4.202-4.193zm12.837 0a4.199 4.199 0 0 1 4.202-4.194 4.198 4.198 0 0 1 4.202 4.194 4.198 4.198 0 0 1-4.202 4.193 4.198 4.198 0 0 1-4.202-4.193zm126.47 14.302a2.349 2.349 0 0 1-2.351 2.346H4.702v116.487c0 5.131 4.184 9.306 9.326 9.306H214.14c5.142 0 9.326-4.175 9.326-9.306V91.845a2.349 2.349 0 0 1 2.351-2.347 2.35 2.35 0 0 1 2.351 2.347v85.157c0 7.719-6.293 13.998-14.028 13.998H14.028C6.293 191 0 184.721 0 177.002V43.194c0-7.719 6.293-13.999 14.028-13.999h151.269a2.35 2.35 0 0 1 2.351 2.346 2.349 2.349 0 0 1-2.351 2.346H14.028c-5.142 0-9.326 4.175-9.326 9.307v12.629h160.595a2.349 2.349 0 0 1 2.351 2.346z" />
                            </svg>

                            <h1 class=" font-w500 push-50 animated fadeInUp" style="margin-bottom: 50px;">Non è possibile effettuare richieste di abbonamento nella giornata di oggi.<br />Da domani sarà di nuovo possibile effettuarne.</h1>
                            <a href="/scrivania" s class="mb-xs mt-xs mr-xs btn btn-lg btn-primary">VAI ALLA HOME</a>
                        </div>
                    </div>

                }
                else
                {
                    <div class="row">
                        <div class="col-md-8">
                            @Html.RenderPanel(PanelType.Panel, "Elenco richieste abbonamenti", "../RaiPlace/Abbonamenti/subpartial/_elencoAbbonamenti", Model, false)
                            @*<section class="panel" id="elencoordini">
                                    @Html.Partial( "../RaiPlace/Abbonamenti/subpartial/_elencoAbbonamenti" )
                                </section>*@
                        </div>
                            @*@if (Model.CreaAbbonamento)
                        {

                            <div class="col-md-4">
                                        <section class="rai panel" id="panelAggiungiAbbonamento">
                                            <header class="panel-heading">
                                                <h2 class="panel-title">Abbonamento</h2>
                                            </header>
                                            <div class="panel-body">
                                                <div class="widget">
                                                    <div class="widget-body">
                                                        <div class="widget-summary push-10">
                                                            <div class="widget-summary-col">
                                                                <span class="rai-font-md"></span>
                                                            </div>
                                                        </div>
                                                        <div class="widget-summary  push-10">
                                                            <div class="widget-summary-col widget-summary-col-icon">
                                                                <div class="summary-icon">
                                                                    <i class="icons icon-map"></i>
                                                                </div>
                                                            </div>
                                                            <div class="widget-summary-col">
                                                                <div class="summary">
                                                                    <h3 class="title" style="word-break: break-word;">Inserisci richiesta abbonamento</h3>
                                                                    <span class="rai-font-sm-neutral"></span>
                                                                </div>
                                                            </div>
                                                        </div>
                                                        <div class="summary-footer">
                                @Html.TextBoxFor(m => m.CittaAbbonamento, htmlAttributes: new { @hidden = true })
                                                            <a href="#" data-toggle="modal" data-target="#modal-abbonamento" class="btn btn-sm rai-btn-small full-width" onclick="ShowGestisciAbbonamento('i',0);" style="height:auto;">AGGIUNGI ABBONAMENTO</a>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </section>

                            </div>

                        }
                                else*@

                            <div class="col-md-4">
                                <section class="rai panel">
                                    <header class="panel-heading">
                                        <h2 class="panel-title">Abbonamento</h2>
                                    </header>
                                    <div class="panel-body">
                                        <div class="widget">
                                            <div class="widget-body">
                                                <div class="widget-summary">
                                                    <div class="widget-summary-col widget-summary-col-icon">
                                                        <div class="summary-icon bg-cda">
                                                            <i class="icons icon-map"></i>
                                                        </div>
                                                    </div>
                                                    <div class="widget-summary-col">
                                                        <div class="summary">
                                                            <h3 class="title" style="word-break: break-word;">
                                                                @if (Model.CittaAbbonamento == "ROMA")
                                                                {

                                                                    <span>
                                                                        Dal 1 dicembre 2020 non è più possibile inoltrare richieste tramite la convenzione RAI-ATAC.
                                                                        <br />
                                                                        Il dipendente può provvedere in autonomia all’attivazione/rinnovo della tessera e accedere al rimborso dalla piattaforma Welfare Experience al link <br />
                                                                        <a href="http://www.raiplace.rai.it/pagine/welfare-e-benefit/">http://www.raiplace.rai.it/pagine/welfare-e-benefit/</a>
                                                                    </span>
                                                                }
                        else
                        {
                                                                    <span>
                                                                        Dal 1 dicembre 2020 non è più possibile inoltrare richieste tramite la convenzione RAI-GTT
                                                                        <br />
                                                                        Il dipendente può provvedere in autonomia all’attivazione/rinnovo della tessera e accedere al rimborso dalla piattaforma Welfare Experience al link <br />
                                                                        <a href="http://www.raiplace.rai.it/pagine/welfare-e-benefit/">http://www.raiplace.rai.it/pagine/welfare-e-benefit/</a>
                                                                    </span>

                                                                    <span>In questa fase non si possono fare richieste di abbonamento.</span>
                                                                }
                                                            </h3>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </section>
                            </div>
                    </div>

            }
            else
            {
                if (Model.CittaAbbonamento == "")
                {
                            @*<div class="row">
                        <div class="col-md-8">
                                        <section class="rai panel">
                                <div class="row">
                                    <div class="col-sm-12">
                                        <section class="panel" id="panelCittaAbbonamento">
                                            <header class="panel-heading">
                                                <div class="row">
                                                    <h2 class="panel-title">Seleziona Città Abbonamento</h2>
                                                </div>
                                            </header>

                                                        @Html.DropDownList("CittaAbbonamentoPubb", new SelectList(@myRai.Controllers.AbbonamentiController.getCittaAbbonamento("ROMA"), "Value", "Text", null), "Città Abbonamento", new { @class = "form-control disabilita", onchange = "CtrInput($(this));" })
                                        </section>
                                    </div>

                                </div>
                                <div class="row">
                                    <div class="col-sm-12 text-right">
                                        <input type="button" class="btn btn-info" title="Inserisci Abbonamento" value="Inserisci Abbonamento" onclick="InserisciAbbonamentoPubb();" />
                                    </div>
                                </div>
                            </section>
                        </div>
                                </div>*@

                            <div class="row">
                                <div class="col-md-8">
                                    <section class="rai panel" id="elencoordini">
                                        @Html.Partial("../RaiPlace/Abbonamenti/subpartial/_elencoAbbonamenti")
                                    </section>
                                </div>
                                <div class="col-md-4">
                                    <section class="rai panel">
                                        <header class="panel-heading">
                                            <h2 class="panel-title">Abbonamento</h2>
                                        </header>
                                        <div class="panel-body">
                                            <div class="widget">
                                                <div class="widget-body">
                                                    <div class="widget-summary">
                                                        <div class="widget-summary-col widget-summary-col-icon">
                                                            <div class="summary-icon bg-cda">
                                                                <i class="icons icon-map"></i>
                                                            </div>
                                                        </div>
                                                        <div class="widget-summary-col">
                                                            <div class="summary">
                                                                <h3 class="title" style="word-break: break-word;">
                                                                    <span>
                                                                        Dal 1 dicembre 2020 non è più possibile inoltrare richieste tramite la convenzione RAI.
                                                                        <br />
                                                                        Il dipendente può provvedere in autonomia all’attivazione/rinnovo della tessera e accedere al rimborso dalla piattaforma Welfare Experience al link <br />
                                                                        <a href="http://www.raiplace.rai.it/pagine/welfare-e-benefit/">http://www.raiplace.rai.it/pagine/welfare-e-benefit/</a>
                                                                    </span>
                                                                </h3>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </section>
                                </div>
                    </div>
                }
                else
                {
                    <div class="row">
                        <div class="col-md-8">
                            <section class="panel">
                                <div class="row">

                                    La sede di appartenenza non prevede questa funzionalità
                                </div>
                            </section>
                        </div>
                    </div>
                }

            }
        </div>
    </main>
</section>


@Html.RenderModal("abbonamento")




